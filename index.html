<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Database Interaction</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        form {
            margin-bottom: 20px;
        }
        input, button {
            margin: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
    </style>
</head>
<body>
    <h1>Basic Database Interaction</h1>
    <form id="dataForm">
        <input type="text" id="assInp" placeholder="Enter assertion" required>
        <input type="text" id="resInp" placeholder="Enter reasoning" required>
        <input type="number" id="parInp" placeholder="Enter parent" required>
        <button type="submit">Add to Database</button>
    </form>

    <h2>Database Records</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Assertion</th>
                <th>Reasoning</th>
            </tr>
        </thead>
        <tbody id="dataTable">
        </tbody>
    </table>

    <script type="module">
		import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

		// Supabase configuration
		const SUPABASE_URL = 'https://htbxgsolhsxacotnprjq.supabase.co';
		const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0Ynhnc29saHN4YWNvdG5wcmpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE2MzQ2MzAsImV4cCI6MjA1NzIxMDYzMH0.OJy9IdF8aWh_YuqU3WIdvuqAX-2GAfTTjMxu9zMAHMo';
		const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

		// Fetch and display records
		async function fetchRecords() {
		    const { data, error } = await supabase.from('Arguments').select('*');
		    if (error) {
		        console.error('Error fetching records:', error);
		        return;
		    }
		    
		    const table = document.getElementById('dataTable');
		    table.innerHTML = '';
		    data.forEach(argument => {
		        const row = document.createElement('tr');
		        row.innerHTML = `<td>${argument.id}</td><td>${argument.Assertion}</td><td>${argument.Reasoning}</td><td>${argument.Parent}</td>`;
		        table.appendChild(row);
		    });
		    
		}

		// Add record to database
		document.getElementById('dataForm').addEventListener('submit', async (event) => {
			event.preventDefault();
			const Assertion = document.getElementById('assInp').value;
			const Reasoning = document.getElementById('resInp').value;
			const Parent = document.getElementById('parInp').value;

			const { error } = await supabase.from('Arguments').insert([{ Assertion, Reasoning, Parent }]);
			if (error) {
				console.error('Error adding record:', error);
				return;
			}

			document.getElementById('dataForm').reset();
			fetchRecords();
		});


		// Initialize
		fetchRecords();
	</script>

</body>
</html>

